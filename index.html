<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lighthouse Hair - 发现优质网站，探索互联网世界。提供搜索引擎、社交媒体、视频平台、音乐平台等分类导航。">
    <meta name="keywords" content="网站导航,搜索引擎,社交媒体,视频平台,音乐平台,实用工具,设计资源,AI工具,教育资源">
    <meta name="author" content="Lighthouse Hair">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <link rel="icon" type="image/png" href="https://cdn.lighthouse.hair/favicon.png">
    <link rel="apple-touch-icon" href="https://cdn.lighthouse.hair/apple-touch-icon.png">
    <link rel="manifest" href="https://cdn.lighthouse.hair/manifest.json">
    <title>Lighthouse Hair - 网站导航</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://cdn.lighthouse.hair/favicon.png" as="image">
    <script>
        // 性能监控
        window.addEventListener('load', () => {
            const timing = window.performance.timing;
            const loadTime = timing.loadEventEnd - timing.navigationStart;
            console.log('页面加载时间：', loadTime + 'ms');
            
            // 发送性能数据到服务器
            fetch('https://api.lighthouse.hair/analytics', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    loadTime,
                    url: window.location.href,
                    userAgent: navigator.userAgent
                })
            }).catch(console.error);
        });

        // 错误处理
        window.addEventListener('error', (event) => {
            console.error('页面错误：', event.error);
            // 发送错误信息到服务器
            fetch('https://api.lighthouse.hair/error', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: event.error.message,
                    stack: event.error.stack,
                    url: window.location.href
                })
            }).catch(console.error);
        });
    </script>
    // ... existing code ...    <script>
        // ... existing code ...

        // 图片懒加载
        const lazyImages = document.querySelectorAll('img[data-src]');
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                    observer.unobserve(img);
                }
            });
        });

        lazyImages.forEach(img => imageObserver.observe(img));

        // 拼音搜索支持
        const pinyin = require('pinyin');
        
        function toPinyin(str) {
            return pinyin(str, {
                style: pinyin.STYLE_NORMAL,
                heteronym: false
            }).flat().join('');
        }

        // 搜索功能优化
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const siteCards = document.querySelectorAll('.site-card');
        let searchTimeout;

        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const searchPinyin = toPinyin(searchTerm);
            
            // 清除之前的定时器
            clearTimeout(searchTimeout);
            
            // 设置新的定时器，避免频繁搜索
            searchTimeout = setTimeout(() => {
                const results = [];
                
                siteCards.forEach(card => {
                    const title = card.querySelector('h3').textContent;
                    const description = card.querySelector('p').textContent;
                    const tags = Array.from(card.querySelectorAll('.site-tag')).map(tag => tag.textContent);
                    
                    const titlePinyin = toPinyin(title);
                    const descriptionPinyin = toPinyin(description);
                    const tagsPinyin = tags.map(tag => toPinyin(tag));
                    
                    if (title.toLowerCase().includes(searchTerm) || 
                        description.toLowerCase().includes(searchTerm) || 
                        tags.some(tag => tag.toLowerCase().includes(searchTerm)) ||
                        titlePinyin.includes(searchPinyin) ||
                        descriptionPinyin.includes(searchPinyin) ||
                        tagsPinyin.some(tag => tag.includes(searchPinyin))) {
                        results.push({
                            title,
                            description,
                            url: card.href
                        });
                    }
                });

                // 显示搜索结果
                if (results.length > 0 && searchTerm) {
                    searchResults.innerHTML = results.map(result => `
                        <div class="search-result-item" data-url="${result.url}">
                            <div class="search-result-title">${result.title}</div>
                            <div class="search-result-description">${result.description}</div>
                        </div>
                    `).join('');
                    searchResults.classList.add('visible');
                } else {
                    searchResults.classList.remove('visible');
                }
            }, 300);
        });

        // 分类筛选功能
        const categoryFilters = document.querySelectorAll('.category-filter');
        categoryFilters.forEach(filter => {
            filter.addEventListener('click', () => {
                const category = filter.dataset.category;
                siteCards.forEach(card => {
                    if (category === 'all' || card.dataset.category === category) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // 网站访问统计（使用后端存储）
        async function recordVisit() {
            try {
                await fetch('https://api.lighthouse.hair/visits', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        url: window.location.href,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent
                    })
                });
            } catch (error) {
                console.error('记录访问失败：', error);
            }
        }

        recordVisit();

        // 收藏功能（使用后端存储）
        async function toggleFavorite(url) {
            try {
                const response = await fetch('https://api.lighthouse.hair/favorites', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ url })
                });
                
                if (response.ok) {
                    const favoriteBtn = document.querySelector(`[data-url="${url}"] .favorite-btn`);
                    favoriteBtn.classList.toggle('active');
                }
            } catch (error) {
                console.error('收藏操作失败：', error);
            }
        }

        // ... rest of existing code ...<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>https://www.lighthouse.hair/</loc>
        <lastmod>2024-03-20</lastmod>
        <changefreq>daily</changefreq>
        <priority>1.0</priority>
    </url>
</urlset>    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Lighthouse Hair",
        "url": "https://www.lighthouse.hair",
        "description": "发现优质网站，探索互联网世界。提供搜索引擎、社交媒体、视频平台、音乐平台等分类导航。",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://www.lighthouse.hair/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "搜索引擎",
                "item": {
                    "@type": "WebPage",
                    "name": "搜索引擎",
                    "url": "https://www.lighthouse.hair#search"
                }
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "社交媒体",
                "item": {
                    "@type": "WebPage",
                    "name": "社交媒体",
                    "url": "https://www.lighthouse.hair#social"
                }
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "视频平台",
                "item": {
                    "@type": "WebPage",
                    "name": "视频平台",
                    "url": "https://www.lighthouse.hair#video"
                }
            }
        ]
    }
    </script>
    // ... existing code ...
